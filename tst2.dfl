mut A: [int]

chan st_index: int | write A[st_index]

proc Inc (i: int) | write A[i..], output st_index =
    send i -> st_index
    Inc (i + 1)

proc St | input st_index =
    recv i <- st_index
    write 0 -> A[i]
    St
     
proc Program | write A, input st_index, output st_index =
    Inc 0 || St
